unit Gerardor_Classe.GerarClasseZeos;

interface

uses orm.dao.BaseDAOZeos, Gerador_Classe.Gerar_Classes.GerarClasseVO,
  Gerar_Classe.Interfaces.iBaseGerarClasseBanco, DB, System.SysUtils;

type
  TGerarClasseZeos = class(TGerarClasseVO)
    private
    protected
      function GetCamposPK(): string; override;
    public
      constructor Create(AClasseBanco: iBaseGerarClasseBanco);
  end;

implementation

{ TGerarClasseZeos }

constructor TGerarClasseZeos.Create(AClasseBanco: iBaseGerarClasseBanco);
begin
   inherited Create(AClasseBanco);
end;

function TGerarClasseZeos.GetCamposPK: string;
var
   sep: string;
   DS: TDataSet;
begin
   sep := '';
   DS := TBaseDAOZeos<TGerarClasseZeos>.New.ConsultaSql(GerarClasseBanco.GetSqlCamposPK(FTabela));
   while not DS.Eof do
   begin
     if Result <> '' then
       sep := ',';
     Result := Result + sep + Trim(DS.FieldByName(DS.FieldByName('ID').AsString));
     DS.Next;
   end;
end;

end.
